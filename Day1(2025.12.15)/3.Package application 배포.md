# Openshift template

k8s에는 없고 openshift에만 있는 기능
template을 통해 쉽고 빠르게 앱을 manifest하고 배포, 업데이트를 한다.


template은 parameter가 중요하다.


#### openshif cli는 단/복수를 따지지 않는다.

개발자나 운영자가 명령어를 사용하거나 설정 파일을 작성할 때 리소스 이름을 단수형으로 써도 되고, 복수형으로 써도 시스템이 모두 인식한다


#### oc process 
template에 parameter를 주입하는 명령어


### template 만드는 법
1) oc get template cache-service -n openshift -o yaml > 이름.yaml

2) oc process --parameters -f 이름.yaml
이렇게 하면 해당 템플릿의 parameter목록을 알려준다.

### template으로 앱 만드는 법

1) oc new-app --template=cache-service -p APPLICATION_USER=my-user

new-app은 cluster말고 자동으로 openshift로 namespace를 찾아서 앱을 statefulset.apps의 pod로 만들어준다.

2) 만들고 상태 알고싶으면,
oc get po 쳐보면, NAME : cache-service-0이라는 service가 하나 생긴다. 

### template으로 앱 만들고 오류 확인하는 법

1) oc logs cache-service-0
2) 위 명령어로도 모르겠을 때, oc describe pod cache-service 

### 만든 statefulset.apps pod 한꺼번에 삭제

한번에 삭제하려면 같은 라벨 가진 것들을 삭제해야함.
oc delete all -l template=cache-service