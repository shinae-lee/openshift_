# Chapter2. Deploy Packaged Applications

## 2-2. Helm Charts

### 운영체제(OS) 패키지 관리 도구

서버(VM 또는 베어 메탈) 내에 운영체제 수준의 소프트웨어(ex: Apache HTTP 서버, Git, Python)를 설치, 업데이트, 삭제, 관리하는 데 사용된다.

| 도구 | 운영체제/배포판 | 기본 역할 |
| :--- | :--- | :--- |
| **RPM (Red Hat Package Manager)** | Red Hat, CentOS, Fedora, openSUSE | 패키지 파일(`.rpm`) 자체의 형식 및 저수준 설치/제거 도구. |
| **YUM (Yellowdog Updater, Modified)** | 구형 Red Hat, CentOS | RPM 기반 시스템의 의존성(Dependency) 관리를 자동화하는 고수준 도구. |
| **DNF (Dandified YUM)** | 최신 Fedora, RHEL 8+, CentOS Stream | YUM의 차세대 버전. 성능과 의존성 해결 능력이 향상됨. |
| **APT (Advanced Package Tool)** | Debian, Ubuntu | 데비안 기반 시스템에서 패키지(`.deb` 파일)를 관리하는 고수준 도구. |
| **APK (Alpine Package Keeper)** | Alpine Linux | 컨테이너 환경에서 자주 사용되는 경량 리눅스인 Alpine Linux의 패키지 관리자. |


### Helm이란?

##### 참고 : helm.sh(공식사이트)

Helm은 클라우드 환경, 특히 Kubernetes 환경에서 애플리케이션을 배포하고 관리하는 데 특화된 도구이다.  
리눅스의 APT/YUM과 유사하게, 복잡한 Kubernetes 리소스(Deployment, Service, Ingress, ConfigMap 등)들의 집합을 한 번에 배포, 업데이트, 롤백할 수 있게 해준다.
go 언어 기반으로 만들어져있다.


| 구성 요소 | 설명 |
| :--- | :--- |
| **Chart (차트)** | Helm에서 애플리케이션을 정의하는 패키지 단위. Kubernetes 리소스 파일(YAML 템플릿)과 설정 파일 등을 묶어 놓은 디렉토리 구조. |
| **Release (릴리즈)** | Chart를 Kubernetes 클러스터에 배포한 특정 인스턴스. 같은 Chart를 여러 번 배포하면 여러 개의 Release가 생성됨. |



### helm chart 설치 및 k8s 클러스배포 준비


#### helm chart 설치

```code
wget http://twoseven.kr/ocp/mysql-helm.tar
```

#### 설치 확인

```code
tar -tf mysql-helm.tar
```

#### 압축 해제

```code
tar -xf mysql-helm.tar
```

#### helm설치 

```code
cd heml ## 해당 디렉토리로 이동한 후
helm install [릴리즈이름] [Chart.yaml이존재하는경로]
```

이렇게 helm을 설치하면 helm chart가 k8s cluster에 배포된다. 

#### helm 차트 배포 상태 확인 

| 목적 | 명령어 |
| :--- | :--- |
| Helm 릴리즈 상태 확인 | helm status [릴리즈이름] |
| K8s 리소스 상태 확인 | oc get all -l app.kubernetes.io/instance=[릴리즈이름] |
| 배포 Pod 상태 확인 | oc get pods -n [네임스페이스] |

#### 모든 리소스를 한번에삭제

Kustomize는 못하는건데 helm은 리소스를 한번에 삭제할 수 있다.
적절한 권한이 필요하므로 helm으로 배포했던 namespace에서 진행해야한다.

```code
helm uninstall mysql
```


### 해볼것 : helm으로 여러개 배포하고 롤백하는거!!! 