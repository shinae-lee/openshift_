# Chapter4. Authentication and Authorization

## deployment를 만들면,

deployment, pod, replicaset의 세가지 리소스가 만들어진다.
외부에서 curl명령어로 deployment로 접근하기 위해서는 "service"가 필요하다.

또, deployment와 replicaset이 있으면 pod가 죽어도 최소 1개는 만든다.

oc create로 deployment 만들면,
label의 key는 항상 app, value는 항상 deployment이름이다.

service의 이름을 deployment와 같이 만들지 않으면 못찾음.  
그래서 아래와 같이 port를 찾아줘야한다

```code
oc get po --show-labels
```

## 서비스 생성

```code
oc expose deployment/nginx-deploy --port 8080
```

## service 확인

```code
oc describe svc nginx-deploy
```

```code
oc get svc
```

## 같은 cluster내부에서 접속 ip 확인하는 코드

```code
oc get endpoints
```
--> cluster외부에서 접속하기 위해서는 ingress(k8s)나 router(openshift)가 필요하다.

## 외부에서 다른 클러스터 service에 접속하기위해서 router생성

```code
oc expose svc nginx-deploy
```
