# Chapter 6. Enable Developer Self-Service

## 6-2.  Per-Project Resource Constraints: Limit Ranges

Namespace(Project) 단위 자원 관리에는 ResourceQuota, LimitRange 두 가지 레벨이 있다.

| 구분                | 목적                               | 대상                          |
| ----------------- | -------------------------------- | --------------------------- |
| **ResourceQuota** | “이 네임스페이스 전체가 얼마나 쓸 수 있는가”       | Namespace 전체                |
| **LimitRange**    | “Pod/Container 하나당 얼마까지 쓸 수 있는가” | Namespace 내부의 Pod/Container |

즉, Quota 는 해당 project 가 얼마나 쓸 수 있는지 **총량** 을 결정하는 것이고, limit range는 개별 워크로드를 관리하는 것이다.

### ResourceQuota (총량 제한)

특정 namespace가 클러스터 자원을 과도하게 독점하지 못하게 하기위해서 제한한다.
```yaml
apiVersion: v1
kind: ResourceQuota
spec:
  hard:
    limits.cpu: "8"
    limits.memory: 8Gi
    requests.cpu: "4"
    requests.memory: 4Gi
```
위 설정은 namespace 전체에서 아래와 같은 제한을 준다. 

CPU limit 합 ≤ 8  
Memory limit 합 ≤ 8Gi  
CPU request 합 ≤ 4  
Memory request 합 ≤ 4Gi  

| 구분 | Requests (요청량) | Limits (제한량) |
|------|------------------|-----------------|
| 의미 | Pod를 실행하기 위해 반드시 확보되어야 하는 최소 자원 | Pod가 최대로 사용할 수 있는 자원의 상한선 |
| 스케줄링 | 노드에 이만큼의 빈 자리가 있어야만 Pod가 배치됨 | 스케줄링에는 영향을 주지 않고 실행 중 감시용으로 쓰임 |
| 비유 | 식당 예약 시 "최소 4명 앉을 자리가 필요해요" | 무한 리필 식당에서 "최대 8접시까지만 먹을 수 있어요" |
