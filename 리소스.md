# openshift/k8s 리소스

## 물리적/논리적 인프라

### Node

실제 애플리케이션(Pod)이 실행되는 **물리 서버 또는 가상 머신(VM)**  

- Master Node: 클러스터를 관리하고 제어
    ```code
    # ssh 접속없이 노드(서버)의 운영체제 내부로 직접 접속가능
    oc debug node
    ```
- Worker Node: 실제 사용자의 컨테이너가 실행됨.

### Cluster

여러 개의 Node들이 하나로 묶여 관리되는 전체 시스템  
모든 서비스, 배치, 네트워크가 이 클러스터 안에서 동작


### Workloads

클러스터 상에서 실행되는 애플리케이션의 실행 단위가 되는 리소스

- Pod: 가장 기본적인 실행 단위  
- Deployment / DeploymentConfig: 앱의 배포와 복제본 관리  
- StatefulSet: 데이터베이스처럼 상태 저장이 필요한 앱   
- Job / CronJob: 일시적인 작업이나 주기적 작업  


### pod, node, cluster, service ?


비유하자면, Pod = 집, Node = 동네, Cluster = 도시 전체, Service = 택배 상점

```css
Cluster
│
├─ Node 1
│   ├─ Pod A
│   └─ Pod B
│
├─ Node 2
│   ├─ Pod C
│   └─ Pod D
│
└─ Service (고정 IP)
      └─ 논리적 연결 화살표(endpoint) → Pod A, Pod B, Pod C
```


## 워크로드 및 배포 (Workloads)


### Deployment

"어떤 이미지를 사용할지", "Pod를 몇 개 띄울지" 등의 애플리케이션의 상태를 정의하는 설계도
OpenShift에서는 유사한 기능을 하는 DeploymentConfig가 있음.



## 외부 접근 및 서비스 (Traffic Ingress)


### Route(Openshift only)

OpenShift에서 제공하는 외부 노출용 리소스  
서비스(Service)를 클러스터 외부의 도메인 이름(http://myapp.example.com)과 연결됨
표준 Kubernetes의 Ingress와 유사하지만, OpenShift에서 더 편리하게 확장된 기능을 제공한다.  


### Service

여러 개의 Pod를 하나의 고정된 IP로 묶어주는 가상 브라우저 역할
즉, Service는 Pod를 대상으로 하는 가상의 네트워크 엔드포인트

Pod는 언제든 죽고 살아나며 IP가 바뀌지만, Service는 고정된 주소를 유지하여 클라이언트가 안정적으로 연결  

Service는 실제로는 Pod를 직접 포함하지 않고, **레이블 셀렉터(Label Selector)**를 통해 어떤 Pod가 서비스에 속하는지 정의


## LoadBalancer
클라우드 환경(AWS, Azure, GCP 등)에서 제공하는 외부 로드밸런서를 통해 서비스를 외부에 노출하는 방식  




## 네트워킹 및 주소 (IP Types)


### Cluster IP 

서비스 생성 시 기본으로 할당되는 클러스터 내부에서 통신 가능한 가상 **고정 IP**  
클러스터 외부에서는 이 주소로 접근할 수 없기 때문에,  
외부에서 접근하려면 NodePort나 LoadBalancer 같은 다른 타입이 필요하다.

### External IP

클러스터 외부 네트워크에서 접근 가능한 IP 주소  
특정 노드의 IP를 external ip로 지정하거나, LoadBalancer 서비스를 통해 할당받은 공인 IP를 의미한다.

service 상태파악했을 때, EXTERNAL-IP 컬럼에 나타날 수 있는 값은  
NodePort IP(수동 지정) 또는 LoadBalancer가 할당한 공인 IP

